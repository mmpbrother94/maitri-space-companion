<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>MAITRI • Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="theme.css">
</head>
<body>

<!-- Falling stars (Dashboard too, like your screenshots) -->
<script src="starfield.js"></script>
<script src="chat.js"></script>


<div class="wrap">
  <!-- ===== NAV ===== -->
  <nav class="nav">
    <div class="brand">
      <div class="badge">🧠</div>
      <div>
        <div style="font-weight:800">MAITRI</div>
        <div style="color:var(--muted);font-size:12px;margin-top:-2px">ASTRONAUT AI COMPANION</div>
      </div>
    </div>
    <div>
      <a href="index.html">Home</a>
      <a href="dashboard.html" class="active">Dashboard</a>
      <a href="emotion.html">Detection</a>
      <a href="interventions.html">Interventions</a>
      <a href="reports.html">Reports</a>
    </div>
    <a class="btn btn-primary btn-pill" href="dashboard.html"><span class="icon">🚀</span>Launch Mission Control</a>
  </nav>

  <!-- ===== PAGE TITLE + CLOCK ===== -->
  <section class="section" style="padding-top:22px">
    <div style="display:flex;align-items:flex-start;justify-content:space-between;gap:18px">
      <div>
        <h1 style="font-size:54px; margin:0 0 4px">Mission Control</h1>
        <div style="display:flex;align-items:center;gap:10px;color:#7fb9ff">
          <span>🧭</span>
          <span>Real-time crew monitoring • Bhartiya Antariksh Station</span>
        </div>
      </div>

      <!-- Mission Clock -->
      <div class="panel" style="min-width:270px;text-align:center;padding:16px 18px">
        <div id="missionClock" style="font-size:28px;font-weight:900;letter-spacing:2px">00:00:00</div>
        <small id="missionMeta" style="display:block;margin-top:4px;color:#9cc9d8">Mission Day 127 • Orbit 2,048</small>
      </div>
    </div>
  </section>

  <!-- ===== LIVE EMOTION BANNER ===== -->
  <section class="section" style="padding-top:10px">
    <div class="panel" style="
      padding:22px 26px;
      background:
        radial-gradient(1200px 700px at 20% -20%, rgba(32,195,255,.10), transparent 35%),
        linear-gradient(180deg, rgba(10,30,46,.85), rgba(10,20,30,.55));
      display:flex; align-items:center; justify-content:space-between; gap:16px">
      <div style="display:flex;align-items:center;gap:14px">
        <div class="badge">⚡</div>
        <div>
          <div style="font-size:22px;font-weight:900;margin-bottom:4px">Live Emotion Detected!</div>
          <small style="color:#b6d6e4">Commander Sharma’s emotional state has been updated</small>
        </div>
      </div>
      <div style="text-align:right">
        <div style="font-size:34px;font-weight:900;color:#7fb9ff">Calm</div>
        <small style="color:#9cc9d8">Confidence: 86%</small>
      </div>
    </div>
  </section>

  <!-- ===== KPI STRIP (4) ===== -->
  <section class="grid" style="margin-top:18px;grid-template-columns:repeat(4,1fr)">
    <article class="card" style="display:flex;align-items:center;gap:14px">
      <div class="badge">👥</div>
      <div>
        <div style="font-size:38px;font-weight:900;line-height:1">4</div>
        <small>Crew Members</small>
      </div>
      <div style="margin-left:auto;color:#20e3b2"><small>+0%</small></div>
    </article>

    <article class="card" style="display:flex;align-items:center;gap:14px">
      <div class="badge">💙</div>
      <div>
        <div style="font-size:38px;font-weight:900;line-height:1">84%</div>
        <small>Avg Well-being</small>
      </div>
      <div style="margin-left:auto;color:#20e3b2"><small>+5%</small></div>
    </article>

    <article class="card" style="display:flex;align-items:center;gap:14px">
      <div class="badge" style="background:linear-gradient(135deg,#32e27a,#13b86b)">📶</div>
      <div>
        <div style="font-size:38px;font-weight:900;line-height:1">24/7</div>
        <small>Active Monitoring</small>
      </div>
      <div style="margin-left:auto;color:#20e3b2"><small>100%</small></div>
    </article>

    <article class="card" style="display:flex;align-items:center;gap:14px">
      <div class="badge" style="background:linear-gradient(135deg,#ffb45b,#ee7b22)">⚠️</div>
      <div>
        <div style="font-size:38px;font-weight:900;line-height:1">1</div>
        <small>Alerts Today</small>
      </div>
      <div style="margin-left:auto;color:#e09a2d"><small>-50%</small></div>
    </article>
  </section>

  <!-- ===== CREW CARDS (2x2 grid) ===== -->
  <section class="grid" style="grid-template-columns:1fr 1fr">
    <!-- Commander Sharma -->
    <article class="card" style="padding:26px; overflow:hidden">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:12px">
        <div style="display:flex;align-items:center;gap:12px">
          <div class="badge" style="background:linear-gradient(135deg,#28d2a0,#1db6ff)">CS</div>
          <div>
            <div style="font-weight:900;font-size:22px">Commander Sharma</div>
            <small style="color:#9cc9d8">🙂 Calm</small>
          </div>
        </div>
        <div>
          <span style="padding:6px 10px;border-radius:999px;background:rgba(32,227,178,.15);border:1px solid rgba(32,227,178,.35);color:#20e3b2;font-weight:800">GOOD</span>
        </div>
      </div>

      <div style="margin:16px 0 8px">Well-being Score</div>
      <div class="bar"><span style="width:86%"></span></div>

      <div class="grid" style="grid-template-columns:repeat(3,1fr);margin-top:16px">
        <div class="panel"><div style="opacity:.8">Heart Rate</div><div style="font-weight:900">82 bpm</div></div>
        <div class="panel"><div style="opacity:.8">Sleep</div><div style="font-weight:900">5.8h</div></div>
        <div class="panel"><div style="opacity:.8">Stress</div><div style="font-weight:900">Medium</div></div>
      </div>

      <a class="btn btn-ghost btn-pill" href="reports.html" style="margin-top:14px; width:100%; text-align:center">View Detailed Analysis</a>
    </article>

    <!-- Scientist Reddy -->
    <article class="card" style="padding:26px; overflow:hidden">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:12px">
        <div style="display:flex;align-items:center;gap:12px">
          <div class="badge" style="background:linear-gradient(135deg,#67d5ff,#2e7bff)">SR</div>
          <div>
            <div style="font-weight:900;font-size:22px">Scientist Reddy</div>
            <small style="color:#9cc9d8">😊 Content</small>
          </div>
        </div>
        <div>
          <span style="padding:6px 10px;border-radius:999px;background:rgba(32,227,178,.15);border:1px solid rgba(32,227,178,.35);color:#20e3b2;font-weight:800">STABLE</span>
        </div>
      </div>

      <div style="margin:16px 0 8px">Well-being Score</div>
      <div class="bar"><span style="width:88%"></span></div>

      <div class="grid" style="grid-template-columns:repeat(3,1fr);margin-top:16px">
        <div class="panel"><div style="opacity:.8">Heart Rate</div><div style="font-weight:900">70 bpm</div></div>
        <div class="panel"><div style="opacity:.8">Sleep</div><div style="font-weight:900">7.5h</div></div>
        <div class="panel"><div style="opacity:.8">Stress</div><div style="font-weight:900">Low</div></div>
      </div>

      <a class="btn btn-ghost btn-pill" href="reports.html" style="margin-top:14px; width:100%; text-align:center">View Detailed Analysis</a>
    </article>

    <!-- Engineer Kumar (attention) -->
    <article class="card" style="padding:26px; grid-column:1 / span 2; background:
      radial-gradient(900px 700px at 10% -20%, rgba(255,164,57,.10), transparent 35%),
      linear-gradient(180deg, rgba(40,25,5,.72), rgba(20,12,4,.45)); border-color:rgba(255,174,0,.25)">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:12px">
        <div style="display:flex;align-items:center;gap:12px">
          <div class="badge" style="background:linear-gradient(135deg,#ffb45b,#ee7b22)">EK</div>
          <div>
            <div style="font-weight:900;font-size:22px">Engineer Kumar</div>
            <small style="color:#d9c6a4">😟 Stressed</small>
          </div>
        </div>
        <div>
          <span style="padding:6px 10px;border-radius:999px;background:rgba(255,174,0,.12);border:1px solid rgba(255,174,0,.45);color:#ffb45b;font-weight:800">ATTENTION</span>
        </div>
      </div>

      <div style="margin:16px 0 8px">Well-being Score</div>
      <div class="bar"><span style="width:68%; background:linear-gradient(90deg,#ffb45b,#ee7b22)"></span></div>

      <div class="grid" style="grid-template-columns:repeat(3,1fr);margin-top:16px">
        <div class="panel"><div style="opacity:.8">Heart Rate</div><div style="font-weight:900">82 bpm</div></div>
        <div class="panel"><div style="opacity:.8">Sleep</div><div style="font-weight:900">5.8h</div></div>
        <div class="panel"><div style="opacity:.8">Stress</div><div style="font-weight:900">Medium</div></div>
      </div>

      <a class="btn btn-ghost btn-pill" href="reports.html" style="margin-top:14px; width:100%; text-align:center">View Detailed Analysis</a>
    </article>
  </section>

  <!-- ===== ACTIVITY & ALERTS ===== -->
  <section class="row" style="margin-top:12px">
    <div class="panel">
      <h3 style="display:flex;align-items:center;gap:10px;margin:0 0 12px"><span>🕒</span>Recent Activity</h3>
      <ul style="list-style:none;padding:0;margin:6px 0 0 0;display:grid;gap:10px">
        <li class="card" style="padding:14px"><strong style="color:#eaf6ff">Commander Sharma emotion detected: Calm</strong><br><small>Just now</small></li>
        <li class="card" style="padding:14px"><strong>Engineer Kumar completed stress management session</strong><br><small>2 min ago</small></li>
        <li class="card" style="padding:14px"><strong>Dr. Patel logged daily health metrics</strong><br><small>15 min ago</small></li>
        <li class="card" style="padding:14px"><strong>Commander Sharma received motivational intervention</strong><br><small>1 hour ago</small></li>
        <li class="card" style="padding:14px"><strong>Routine psychological assessment completed</strong><br><small>3 hours ago</small></li>
      </ul>
    </div>

    <div class="panel">
      <h3 style="display:flex;align-items:center;gap:10px;margin:0 0 12px"><span>⚠️</span>Active Alerts</h3>
      <div class="card" style="padding:16px;background:
          linear-gradient(180deg, rgba(60,40,10,.35), rgba(20,12,4,.25));
          border-color:rgba(255,174,0,.25)">
        <strong>Engineer Kumar showing stressed indicators</strong><br>
        <small>Intervention recommended</small>
      </div>
    </div>
  </section>

  <!-- ===== BOTTOM CTAs ===== -->
  <div class="section" style="display:flex;gap:14px;justify-content:center;flex-wrap:wrap">
    <a class="btn btn-primary btn-pill" href="emotion.html"><span class="icon">🛰️</span>Start Emotion Scan</a>
    <a class="btn btn-ghost btn-pill" href="interventions.html"><span class="icon">💙</span>View Interventions</a>
    <a class="btn btn-ghost btn-pill" href="reports.html"><span class="icon">📄</span>Generate Report</a>
  </div>
</div>

<!-- ===== FLOATING COMPANION BOT ===== -->
<button id="astroChatBtn" title="MAITRI Companion" class="btn btn-primary" aria-label="Open MAITRI Companion" style="position:fixed;right:22px;bottom:22px;border:none;border-radius:50%;width:58px;height:58px">💬</button>
<div id="astroChatPane" class="panel" style="position:fixed;right:22px;bottom:90px;width:360px;max-height:70vh;display:none;">
  <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px">
    <div style="display:flex;align-items:center;gap:8px"><div class="badge">🧠</div><strong>MAITRI Companion</strong></div>
    <button id="closeAstro" class="btn btn-ghost">×</button>
  </div>
  <div id="astroLog" style="overflow:auto;height:300px;font-size:14px">
    <div><em>👋 Namaste, Commander. I can chat like family, track vitals, and suggest interventions.</em></div>
  </div>
  <div class="chips" style="margin-top:8px">
    <button class="chipbtn" data-msg="I'm stressed">I’m stressed</button>
    <button class="chipbtn" data-msg="I miss my family">I miss my family</button>
    <button class="chipbtn" data-msg="I can't sleep">I can’t sleep</button>
  </div>
  <div style="display:flex;gap:8px;margin-top:10px">
    <input id="astroInput" placeholder="Type a message…" style="flex:1;border-radius:12px;border:1px solid var(--stroke);padding:10px;background:transparent;color:#fff">
    <button id="astroSend" class="btn btn-primary">Send</button>
  </div>
</div>

<!-- ===== Bot logic ===== -->
<script>
(function(){
  const pane = document.getElementById('astroChatPane');
  document.getElementById('astroChatBtn').addEventListener('click', toggle);
  document.getElementById('closeAstro').addEventListener('click', toggle);
  function toggle(){
    if(pane.style.display==='none' || !pane.style.display){
      pane.style.display='block';
      pane.animate([{transform:'translateY(20px)',opacity:0},{transform:'translateY(0)',opacity:1}],{duration:220,easing:'ease-out'});
    }else{
      pane.animate([{transform:'translateY(0)',opacity:1},{transform:'translateY(20px)',opacity:0}],{duration:180,easing:'ease-in'}).onfinish=()=>pane.style.display='none';
    }
  }

  const log=document.getElementById('astroLog');
  const input=document.getElementById('astroInput');
  const send=document.getElementById('astroSend');

  function push(sender,text){
    const d=document.createElement('div'); d.style.margin='6px 0'; d.innerHTML=sender+': '+text;
    log.appendChild(d); log.scrollTop=log.scrollHeight;
  }
  function typing(){
    const n=document.createElement('div'); n.id='typing'; n.style.opacity='.8'; n.innerHTML='<em>MAITRI is typing…</em>';
    log.appendChild(n); log.scrollTop=log.scrollHeight; return n;
  }
  function reply(t){
    t=t.toLowerCase();
    if(t.includes('stress')) return 'Breathing 5 min + Mindfulness 10 min are recommended. Start session?';
    if(t.includes('family')||t.includes('home')) return 'I’m here with you. Want me to play a family-style message and soft music?';
    if(t.includes('sleep')) return 'Target 7–8h sleep. I can dim UI and queue a soundscape.';
    return 'Logged. I can also open Interventions or start an Emotion Scan.';
  }
  function sendNow(){
    const val=input.value.trim(); if(!val) return;
    push('<strong>You</strong>', val);
    const tip=typing();
    setTimeout(()=>{ tip.remove(); push('<strong>MAITRI</strong>', reply(val)); }, 700);
    input.value='';
  }
  send.addEventListener('click', sendNow);
  input.addEventListener('keydown', e=>{ if(e.key==='Enter') sendNow(); });
  document.querySelectorAll('.chipbtn').forEach(b=>b.addEventListener('click',()=>{ input.value=b.dataset.msg; sendNow(); }));
})();
</script>

<!-- ===== Button ripple feedback ===== -->
<script>
(function(){
  document.addEventListener('click', function(e){
    const btn = e.target.closest('.btn');
    if(!btn) return;
    const r = btn.getBoundingClientRect();
    const span = document.createElement('span');
    span.className = 'ripple';
    span.style.left = (e.clientX - r.left) + 'px';
    span.style.top  = (e.clientY - r.top)  + 'px';
    btn.appendChild(span);
    setTimeout(()=>span.remove(), 650);
  }, true);
})();
</script>

<!-- ===== Mission Clock ===== -->
<script>
(function(){
  // Simple mission elapsed clock starting from an arbitrary T0 (adjust as needed)
  const clock = document.getElementById('missionClock');
  const meta  = document.getElementById('missionMeta');
  const T0 = new Date('2025-01-01T00:00:00Z').getTime();
  function pad(n){ return n.toString().padStart(2,'0'); }
  function tick(){
    const now = Date.now();
    const el = Math.floor((now - T0)/1000);
    const h = Math.floor(el/3600)%24;
    const m = Math.floor(el/60)%60;
    const s = el%60;
    clock.textContent = `${pad(h)}:${pad(m)}:${pad(s)}`;
    // Fake day/orbit progression for UI flavor
    const day = 127 + Math.floor(el/86400);
    const orbit = 2048 + Math.floor(el/5400);
    meta.textContent = `Mission Day ${day} • Orbit ${orbit.toLocaleString()}`;
    requestAnimationFrame(tick);
  }
  tick();
})();
</script>

</body>
</html>
