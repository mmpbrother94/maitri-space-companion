<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>MAITRI â€¢ Interventions</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="theme.css">
</head>
<body>

<!-- falling stars background -->
<script src="starfield.js"></script>
<script src="chat.js"></script>


<div class="wrap">
  <!-- NAV -->
  <nav class="nav">
    <div class="brand">
      <div class="badge">ğŸ§ </div>
      <div>
        <div style="font-weight:800">MAITRI</div>
        <div style="color:var(--muted);font-size:12px;margin-top:-2px">ASTRONAUT AI COMPANION</div>
      </div>
    </div>
    <div>
      <a href="index.html">Home</a>
      <a href="dashboard.html">Dashboard</a>
      <a href="emotion.html">Detection</a>
      <a href="interventions.html" class="active">Interventions</a>
      <a href="reports.html">Reports</a>
    </div>
    <a class="btn btn-primary btn-pill" href="dashboard.html">Launch Mission Control</a>
  </nav>

  <!-- PAGE TITLE -->
  <section class="section" style="padding-top:22px">
    <h1 style="font-size:54px;margin:0 0 6px">Psychological Interventions</h1>
    <div style="display:flex;align-items:center;gap:10px;color:#7fb9ff">
      <span>ğŸ§¬</span>
      <span>Evidence-based techniques for emotional and physical well-being</span>
    </div>
  </section>

  <!-- KPIs -->
  <section class="section">
    <div class="kpi">
      <div class="box" style="position:relative;overflow:hidden">
        <div class="badge" style="position:absolute;top:-12px;left:-12px">ğŸ’—</div>
        <div style="opacity:.85;margin-left:32px">Sessions Completed</div>
        <div style="font-size:34px;font-weight:800;margin-top:6px" data-kpi="sessions">24</div>
      </div>
      <div class="box" style="position:relative;overflow:hidden">
        <div class="badge" style="position:absolute;top:-12px;left:-12px;background:linear-gradient(135deg,#51e1ff,#4b9bff)">ğŸ“ˆ</div>
        <div style="opacity:.85;margin-left:32px">Avg Effectiveness</div>
        <div style="font-size:34px;font-weight:800;margin-top:6px" data-kpi="eff">89%</div>
      </div>
      <div class="box" style="position:relative;overflow:hidden">
        <div class="badge" style="position:absolute;top:-12px;left:-12px;background:linear-gradient(135deg,#8f6bff,#4ecbff)">ğŸ§ </div>
        <div style="opacity:.85;margin-left:32px">Available Programs</div>
        <div style="font-size:34px;font-weight:800;margin-top:6px" data-kpi="programs">6</div>
      </div>
      <div class="box" style="position:relative;overflow:hidden">
        <div class="badge" style="position:absolute;top:-12px;left:-12px;background:linear-gradient(135deg,#ffaa55,#ff7a7a)">â°</div>
        <div style="opacity:.85;margin-left:32px">Next Session</div>
        <div style="font-size:34px;font-weight:800;margin-top:6px" id="nextSess">10:00 UTC</div>
      </div>
    </div>
  </section>

  <!-- PROGRAMS ROW 1 -->
  <section class="grid" style="margin-top:8px">
    <!-- Breathing -->
    <article class="card">
      <div class="badge" aria-hidden="true">ğŸŒ¬ï¸</div>
      <h3 style="margin:10px 0 6px">Breathing Exercise</h3>
      <p style="margin:0 0 12px;color:#b6d6e4">Guided deep breathing to reduce stress and anxiety</p>
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
        <div><small style="color:#87d8ff">Stress Relief</small></div><small>5 min</small>
      </div>
      <div class="bar"><span style="width:92%"></span></div>
      <div style="margin-top:14px">
        <a class="btn btn-primary btn-pill" href="#" data-action="start" data-program="breathing">Start Session</a>
      </div>
    </article>

    <!-- Mindfulness -->
    <article class="card">
      <div class="badge" aria-hidden="true">ğŸ§˜</div>
      <h3 style="margin:10px 0 6px">Mindfulness Meditation</h3>
      <p style="margin:0 0 12px;color:#b6d6e4">Focus on present moment awareness and mental clarity</p>
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
        <div><small style="color:#87d8ff">Mental Health</small></div><small>10 min</small>
      </div>
      <div class="bar"><span style="width:88%;background:linear-gradient(90deg,#7667ff,#b77cff)"></span></div>
      <div style="margin-top:14px">
        <a class="btn btn-primary btn-pill" href="#" data-action="start" data-program="mindfulness">Start Session</a>
      </div>
    </article>

    <!-- PMR -->
    <article class="card">
      <div class="badge" aria-hidden="true">ğŸ‹ï¸</div>
      <h3 style="margin:10px 0 6px">Progressive Muscle Relaxation</h3>
      <p style="margin:0 0 12px;color:#b6d6e4">Systematic tension & release of muscle groups</p>
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
        <div><small style="color:#87ffbb">Physical Wellness</small></div><small>15 min</small>
      </div>
      <div class="bar"><span style="width:85%;background:linear-gradient(90deg,#29e07c,#1ecf66)"></span></div>
      <div style="margin-top:14px">
        <a class="btn btn-primary btn-pill" href="#" data-action="start" data-program="pmr">Start Session</a>
      </div>
    </article>
  </section>

  <!-- PROGRAMS ROW 2 -->
  <section class="grid" style="margin-top:8px">
    <!-- Positive Affirmations -->
    <article class="card">
      <div class="badge" aria-hidden="true" style="background:linear-gradient(135deg,#ffb457,#ff9157)">ğŸ˜Š</div>
      <h3 style="margin:10px 0 6px">Positive Affirmations</h3>
      <p style="margin:0 0 12px;color:#b6d6e4">Boost confidence and maintain positive mindset</p>
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
        <div><small style="color:#ffd089">Motivation</small></div><small>3 min</small>
      </div>
      <div class="bar" style="background:rgba(255,190,120,.18)"><span style="width:78%;background:linear-gradient(90deg,#ffb457,#e09a2d)"></span></div>
      <div style="margin-top:14px">
        <a class="btn btn-primary btn-pill" href="#" data-action="start" data-program="affirmations">Start Session</a>
      </div>
    </article>

    <!-- Guided Imagery -->
    <article class="card">
      <div class="badge" aria-hidden="true" style="background:linear-gradient(135deg,#ff72a0,#ff4d6d)">ğŸ“–</div>
      <h3 style="margin:10px 0 6px">Guided Imagery</h3>
      <p style="margin:0 0 12px;color:#b6d6e4">Mental visualization for relaxation and focus</p>
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
        <div><small style="color:#ffa3bd">Relaxation</small></div><small>8 min</small>
      </div>
      <div class="bar"><span style="width:90%;background:linear-gradient(90deg,#ff72a0,#b94bff)"></span></div>
      <div style="margin-top:14px">
        <a class="btn btn-primary btn-pill" href="#" data-action="start" data-program="imagery">Start Session</a>
      </div>
    </article>

    <!-- Supportive Conversation -->
    <article class="card">
      <div class="badge" aria-hidden="true" style="background:linear-gradient(135deg,#7c7bff,#c07cff)">ğŸ’¬</div>
      <h3 style="margin:10px 0 6px">Supportive Conversation</h3>
      <p style="margin:0 0 12px;color:#b6d6e4">AI-guided empathetic dialogue and emotional support</p>
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
        <div><small style="color:#9ab8ff">Emotional Support</small></div><small>15 min</small>
      </div>
      <div class="bar"><span style="width:94%;background:linear-gradient(90deg,#7c7bff,#b77cff)"></span></div>
      <div style="margin-top:14px">
        <a class="btn btn-primary btn-pill" href="#" data-action="start" data-program="conversation">Start Session</a>
      </div>
    </article>
  </section>

  <!-- CTAs -->
  <div class="section" style="display:flex;gap:14px;justify-content:center;flex-wrap:wrap">
    <a class="btn btn-ghost btn-pill" href="dashboard.html">Back to Dashboard</a>
    <a class="btn btn-primary btn-pill" href="reports.html">Generate Weekly Report</a>
  </div>
</div>

<!-- Companion bot (same as other pages) -->
<button id="astroChatBtn" title="MAITRI Companion" class="btn btn-primary" aria-label="Open MAITRI Companion" style="position:fixed;right:22px;bottom:22px;border:none;border-radius:50%;width:58px;height:58px">ğŸ’¬</button>
<div id="astroChatPane" class="panel" style="position:fixed;right:22px;bottom:90px;width:360px;max-height:70vh;display:none;">
  <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px">
    <div style="display:flex;align-items:center;gap:8px"><div class="badge">ğŸ§ </div><strong>MAITRI Companion</strong></div>
    <button id="closeAstro" class="btn btn-ghost">Ã—</button>
  </div>
  <div id="astroLog" style="overflow:auto;height:300px;font-size:14px">
    <div><em>ğŸ‘‹ Namaste, Commander. I can chat like family, track vitals, and suggest interventions.</em></div>
  </div>
  <div class="chips" style="margin-top:8px">
    <button class="chipbtn" data-msg="I'm stressed">Iâ€™m stressed</button>
    <button class="chipbtn" data-msg="I miss my family">I miss my family</button>
    <button class="chipbtn" data-msg="I can't sleep">I canâ€™t sleep</button>
  </div>
  <div style="display:flex;gap:8px;margin-top:10px">
    <input id="astroInput" placeholder="Type a messageâ€¦" style="flex:1;border-radius:12px;border:1px solid var(--stroke);padding:10px;background:transparent;color:#fff">
    <button id="astroSend" class="btn btn-primary">Send</button>
  </div>
</div>

<!-- Bot logic -->
<script>
(function(){
  const pane = document.getElementById('astroChatPane');
  document.getElementById('astroChatBtn').addEventListener('click', toggle);
  document.getElementById('closeAstro').addEventListener('click', toggle);
  function toggle(){
    if(pane.style.display==='none' || !pane.style.display){
      pane.style.display='block';
      pane.animate([{transform:'translateY(20px)',opacity:0},{transform:'translateY(0)',opacity:1}],{duration:220,easing:'ease-out'});
    }else{
      pane.animate([{transform:'translateY(0)',opacity:1},{transform:'translateY(20px)',opacity:0}],{duration:180,easing:'ease-in'}).onfinish=()=>pane.style.display='none';
    }
  }
  const log=document.getElementById('astroLog');
  const input=document.getElementById('astroInput');
  const send=document.getElementById('astroSend');
  function push(sender,text){ const d=document.createElement('div'); d.style.margin='6px 0'; d.innerHTML=sender+': '+text; log.appendChild(d); log.scrollTop=log.scrollHeight; }
  function typing(){ const n=document.createElement('div'); n.id='typing'; n.style.opacity='.8'; n.innerHTML='<em>MAITRI is typingâ€¦</em>'; log.appendChild(n); log.scrollTop=log.scrollHeight; return n; }
  function reply(t){
    t=t.toLowerCase();
    if(t.includes('stress')) return 'Breathing 5 min + Mindfulness 10 min are recommended. Start session?';
    if(t.includes('family')||t.includes('home')) return 'Iâ€™m here with you. Want me to play a family-style message and soft music?';
    if(t.includes('sleep')) return 'Target 7â€“8h sleep. I can dim UI and queue a soundscape.';
    return 'Logged. I can also open Interventions or start an Emotion Scan.';
  }
  function sendNow(){
    const val=input.value.trim(); if(!val) return;
    push('<strong>You</strong>', val);
    const tip=typing();
    setTimeout(()=>{ tip.remove(); push('<strong>MAITRI</strong>', reply(val)); }, 700);
    input.value='';
  }
  send.addEventListener('click', sendNow);
  input.addEventListener('keydown', e=>{ if(e.key==='Enter') sendNow(); });
  document.querySelectorAll('.chipbtn').forEach(b=>b.addEventListener('click',()=>{ input.value=b.dataset.msg; sendNow(); }));
})();
</script>

<!-- Button ripple -->
<script>
document.addEventListener('click', function(e){
  const btn = e.target.closest('.btn');
  if(!btn) return;
  const r = btn.getBoundingClientRect();
  const span = document.createElement('span');
  span.className = 'ripple';
  span.style.left = (e.clientX - r.left) + 'px';
  span.style.top  = (e.clientY - r.top)  + 'px';
  btn.appendChild(span);
  setTimeout(()=>span.remove(), 650);
}, true);
</script>

<!-- Micro-interactions: fake KPI tick + â€œStart Sessionâ€ hooks -->
<script>
(function(){
  // Light idle shimmer of KPIs
  const k1 = document.querySelector('[data-kpi="sessions"]');
  const k2 = document.querySelector('[data-kpi="eff"]');
  const k3 = document.querySelector('[data-kpi="programs"]');
  setInterval(()=>{
    if(!k1) return;
    const eff = 89 + Math.sin(Date.now()/4000)*1.0;
    k2.textContent = eff.toFixed(0) + '%';
  }, 1200);

  // Session buttons â€“ keep your own handlers if needed
  document.querySelectorAll('[data-action="start"]').forEach(btn=>{
    btn.addEventListener('click', (e)=>{
      e.preventDefault();
      const p = btn.dataset.program;
      // toast
      const t = document.createElement('div');
      t.textContent = 'Starting ' + p.replace(/^\w/,c=>c.toUpperCase()) + ' sessionâ€¦';
      Object.assign(t.style, {
        position:'fixed', left:'50%', bottom:'28px', transform:'translateX(-50%)',
        background:'linear-gradient(180deg, rgba(17,24,33,.9), rgba(17,24,33,.6))',
        padding:'10px 14px', border:'1px solid var(--stroke)', borderRadius:'14px', color:'#fff', zIndex:9999
      });
      document.body.appendChild(t);
      setTimeout(()=> t.remove(), 1400);
      // hook point: navigate / open modal / trigger player
      // location.href = '#'; // keep as placeholder
    });
  });
})();
</script>

</body>
</html>
